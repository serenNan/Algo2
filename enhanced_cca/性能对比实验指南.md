# Enhanced Cubic vs TCP Reno æ€§èƒ½å¯¹æ¯”å®éªŒ

## ğŸ¯ å®éªŒç›®æ ‡

å¯¹æ¯” **TCP Cubic (enhanced_cca)** å’Œ **TCP Reno (foggytcp2)** åœ¨ä¼ è¾“ 1MB æ–‡ä»¶æ—¶çš„æ€§èƒ½å·®å¼‚ã€‚

---

## ğŸ“‹ å®éªŒæ­¥éª¤

### å‡†å¤‡å·¥ä½œ

```bash
# 1. ç¡®ä¿æµ‹è¯•æ–‡ä»¶å­˜åœ¨
ls -lh /home/serennan/work/algo2/foggytcp2/testdata/test_1mb.bin

# 2. æ¸…ç†ä¹‹å‰çš„è¿›ç¨‹
killall -9 server client 2>/dev/null
```

---

## å®éªŒ A: TCP Reno åŸºçº¿æµ‹è¯•

### ç¼–è¯‘ Reno ç‰ˆæœ¬

```bash
cd /home/serennan/work/algo2/foggytcp2/foggytcp
make clean
make foggy
```

### è¿è¡Œ 10 æ¬¡æµ‹è¯•

åœ¨ä¸¤ä¸ªç»ˆç«¯çª—å£ä¸­æ“ä½œ:

**ç»ˆç«¯ 1 - æœåŠ¡å™¨:**
```bash
cd /home/serennan/work/algo2/foggytcp2/foggytcp

# æ¯æ¬¡æµ‹è¯•å‰å¯åŠ¨æœåŠ¡å™¨
./server 127.0.0.1 15441 /tmp/reno_test.bin

# å®¢æˆ·ç«¯å®Œæˆå Ctrl+C åœæ­¢
# ç„¶åå‡†å¤‡ä¸‹ä¸€æ¬¡æµ‹è¯•
```

**ç»ˆç«¯ 2 - å®¢æˆ·ç«¯ (é‡å¤10æ¬¡):**
```bash
cd /home/serennan/work/algo2/foggytcp2/foggytcp

# æµ‹è¯• 1
rm -f /tmp/reno_test.bin
time ./client 127.0.0.1 15441 ../testdata/test_1mb.bin
# è®°å½• real æ—¶é—´,ä¾‹å¦‚: 0m2.145s

# æµ‹è¯• 2
rm -f /tmp/reno_test.bin
time ./client 127.0.0.1 15441 ../testdata/test_1mb.bin
# è®°å½•æ—¶é—´...

# ... é‡å¤åˆ°æµ‹è¯• 10
```

### è®°å½• Reno æ•°æ®

| æµ‹è¯•æ¬¡æ•° | ä¼ è¾“æ—¶é—´(ç§’) | ååé‡(Mbps) | å¤‡æ³¨ |
|---------|-------------|-------------|------|
| 1       |             |             |      |
| 2       |             |             |      |
| 3       |             |             |      |
| 4       |             |             |      |
| 5       |             |             |      |
| 6       |             |             |      |
| 7       |             |             |      |
| 8       |             |             |      |
| 9       |             |             |      |
| 10      |             |             |      |
| **å¹³å‡** |             |             |      |

> ååé‡è®¡ç®—: (1048576 å­—èŠ‚ Ã— 8 ä½) / (ä¼ è¾“æ—¶é—´ç§’) / 1,000,000 = Mbps

---

## å®éªŒ B: TCP Cubic æ€§èƒ½æµ‹è¯•

### ç¼–è¯‘ Cubic ç‰ˆæœ¬

```bash
cd /home/serennan/work/algo2/enhanced_cca/foggytcp
make clean
make foggy
```

### è¿è¡Œ 10 æ¬¡æµ‹è¯•

**ç»ˆç«¯ 1 - æœåŠ¡å™¨:**
```bash
cd /home/serennan/work/algo2/enhanced_cca/foggytcp

# æ¯æ¬¡æµ‹è¯•å‰å¯åŠ¨æœåŠ¡å™¨
./server 127.0.0.1 15441 /tmp/cubic_test.bin

# å®¢æˆ·ç«¯å®Œæˆå Ctrl+C åœæ­¢
```

**ç»ˆç«¯ 2 - å®¢æˆ·ç«¯ (é‡å¤10æ¬¡):**
```bash
cd /home/serennan/work/algo2/enhanced_cca/foggytcp

# æµ‹è¯• 1
rm -f /tmp/cubic_test.bin
time ./client 127.0.0.1 15441 ../testdata/test_1mb.bin
# è®°å½•æ—¶é—´

# æµ‹è¯• 2
rm -f /tmp/cubic_test.bin
time ./client 127.0.0.1 15441 ../testdata/test_1mb.bin
# è®°å½•æ—¶é—´...

# ... é‡å¤åˆ°æµ‹è¯• 10
```

### è®°å½• Cubic æ•°æ®

| æµ‹è¯•æ¬¡æ•° | ä¼ è¾“æ—¶é—´(ç§’) | ååé‡(Mbps) | å¤‡æ³¨ |
|---------|-------------|-------------|------|
| 1       |             |             |      |
| 2       |             |             |      |
| 3       |             |             |      |
| 4       |             |             |      |
| 5       |             |             |      |
| 6       |             |             |      |
| 7       |             |             |      |
| 8       |             |             |      |
| 9       |             |             |      |
| 10      |             |             |      |
| **å¹³å‡** |             |             |      |

---

## ğŸ“Š æ•°æ®åˆ†æ

### æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | TCP Reno | TCP Cubic | æ”¹è¿› |
|-----|----------|-----------|------|
| å¹³å‡ä¼ è¾“æ—¶é—´ | ___ ç§’ | ___ ç§’ | ___% æ›´å¿« |
| å¹³å‡ååé‡ | ___ Mbps | ___ Mbps | ___% æå‡ |
| æ ‡å‡†å·® | ___ | ___ | æ›´ç¨³å®š/æ›´ä¸ç¨³å®š |

**æ€§èƒ½æå‡è®¡ç®—å…¬å¼:**
```
æ—¶é—´æ”¹è¿› = (Renoæ—¶é—´ - Cubicæ—¶é—´) / Renoæ—¶é—´ Ã— 100%
ååé‡æå‡ = (Cubicåå - Renoåå) / Renoåå Ã— 100%
```

---

## ğŸ” å¯é€‰:è¯¦ç»†åˆ†æ

å¦‚æœä½ æƒ³æ·±å…¥åˆ†æ,å¯ä»¥æ”¶é›†æ›´å¤šæ•°æ®:

### æ‹¥å¡çª—å£å¯¹æ¯”

ä»å®¢æˆ·ç«¯æ—¥å¿—ä¸­æå–æ‹¥å¡çª—å£ä¿¡æ¯:

```bash
# Reno
grep "CWND" /tmp/enhanced_cca_logs/client.log

# Cubic
grep "Cubic Congestion Avoidance, CWND" /tmp/enhanced_cca_logs/client.log
```

### é‡ä¼ æ¬¡æ•°å¯¹æ¯”

```bash
# ç»Ÿè®¡é‡ä¼ 
grep -c "Retransmitting" /tmp/enhanced_cca_logs/client.log
grep -c "Fast retransmit" /tmp/enhanced_cca_logs/client.log
```

---

## ğŸ’¡ å®éªŒæŠ€å·§

1. **ç¡®ä¿ä¸€è‡´æ€§**:
   - æ¯æ¬¡æµ‹è¯•å‰æ¸…ç†è¾“å‡ºæ–‡ä»¶
   - ç¡®ä¿æ²¡æœ‰å…¶ä»–ç½‘ç»œè´Ÿè½½
   - ä½¿ç”¨ç›¸åŒçš„æµ‹è¯•ç¯å¢ƒ

2. **å¤„ç†å¼‚å¸¸**:
   - å¦‚æœæŸæ¬¡æµ‹è¯•å¡ä½,è·³è¿‡è¿™æ¬¡æ•°æ®
   - å®¢æˆ·ç«¯è¶…æ—¶å¯ä»¥ç”¨ `timeout 30 ./client ...`

3. **ç½‘ç»œæ¡ä»¶**(å¯é€‰):
   ```bash
   # å¦‚æœæƒ³æ¨¡æ‹ŸçœŸå®ç½‘ç»œ
   sudo tcset lo --delay 100ms --rate 10Mbps

   # æµ‹è¯•å®Œæˆåæ¸…ç†
   sudo tcdel lo --all
   ```

---

## ğŸ“ ä¸‹ä¸€æ­¥

å®Œæˆæ•°æ®æ”¶é›†å,æˆ‘å¯ä»¥å¸®ä½ :
- è®¡ç®—ç»Ÿè®¡æ•°æ®(å‡å€¼ã€æ ‡å‡†å·®ã€ç½®ä¿¡åŒºé—´)
- ç”Ÿæˆå¯¹æ¯”å›¾è¡¨
- æ’°å†™"ç®—æ³•è¯„ä¼°"éƒ¨åˆ†çš„æŠ¥å‘Šå†…å®¹
- åˆ†ææ€§èƒ½æ”¹è¿›çš„åŸå› 

æŠŠæµ‹è¯•æ•°æ®å‘ç»™æˆ‘,æˆ‘ä¼šå¸®ä½ åšå®Œæ•´çš„åˆ†æå’Œå¯è§†åŒ–!
